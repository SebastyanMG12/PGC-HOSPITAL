<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>E.S.E Hospital El Salvador de Ubaté - Pre Registro Urgencias</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="topbar">
    <!-- Si tienes los logos, ponlos en la carpeta y cámbialos aquí -->
    <div class="logo-left">
      <img src="logo-left.png" alt="logo" onerror="this.style.display='none'"/>
    </div>
    <h1 class="hospital-name">E.S.E Hospital El Salvador de Ubaté</h1>
    <div class="logo-right">
      <img src="logo-right.png" alt="logo" onerror="this.style.display='none'"/>
    </div>
  </header>

  <main class="container">
    <section class="card public-register">
      <h2>Pre-registro Paciente (público)</h2>
      <form id="form-register">
        <div class="form-row">
          <input type="text" id="p_name" placeholder="Nombre completo" required />
          <input type="text" id="p_doc" placeholder="Documento de identidad (opcional)" />
        </div>
        <div class="form-row">
          <input type="tel" id="p_phone" placeholder="Teléfono" />
          <input type="text" id="p_reason" placeholder="Motivo de urgencia / síntoma" required />
        </div>
        <div class="form-row">
          <textarea id="p_notes" placeholder="Notas adicionales (alergias, medicamentos...)" rows="2"></textarea>
        </div>
        <div class="form-row actions">
          <button class="btn primary" type="submit">Enviar pre-registro</button>
          <button class="btn ghost" type="button" id="btn-clear">Limpiar</button>
        </div>
      </form>
      <div id="register-result" class="muted" style="display:none;"></div>
      <small class="muted">Al registrarte se genera un código público para que tus acompañantes consulten el estado.</small>
    </section>

    <section class="card quick-access">
      <h2>Accesos Rápidos</h2>
      <div class="grid">
        <div class="box">
          <h3>Personal del hospital</h3>
          <p>Médicos, enfermería y administración (acceso unificado).</p>
          <button class="btn primary" id="open-login-staff">Ir al Login</button>
        </div>
        <div class="box">
          <h3>Acompañante (Público)</h3>
          <p>Consultar por código público del paciente.</p>
          <button class="btn" id="open-companion">Consultar</button>
        </div>
      </div>
    </section>

  <!-- MODALES / PANELES -->
  <!-- Login Modal -->
  <div class="overlay hidden" id="modal-login">
    <div class="modal">
      <h3 id="login-title">Login</h3>
      <form id="form-login">
        <input type="text" id="login-username" placeholder="Usuario" required />
        <input type="password" id="login-password" placeholder="Contraseña" required />
        <div class="row">
          <select id="login-role">
            <option value="medico">Personal Médico</option>
            <option value="admin">Administración</option>
          </select>
          <button class="btn primary" type="submit">Ingresar</button>
        </div>
      </form>
      <hr />
      <div>
        <h4>Crear usuario local</h4>
        <form id="form-create-user">
          <input type="text" id="new-username" placeholder="Usuario" required />
          <input type="password" id="new-password" placeholder="Contraseña" required />
          <select id="new-role">
            <option value="medico">Personal Médico</option>
            <option value="admin">Administración</option>
          </select>
          <div class="row">
            <button class="btn" id="btn-create-user" type="submit">Crear usuario</button>
            <button class="btn ghost" id="btn-cancel-login" type="button">Cerrar</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Registration success "instagram style" modal -->
  <div class="overlay hidden" id="modal-registered">
    <div class="ig-modal">
      <button class="ig-close" id="btn-close-registered" aria-label="Cerrar">&times;</button>
      <div class="ig-content">
        <h3>Registro exitoso</h3>
        <p class="ig-sub">Tu código público es:</p>
        <div class="ig-code" id="reg-code">--</div>
        <p class="muted">Guarda y comparte este código solo con tus acompañantes autorizados.</p>
      </div>
    </div>
  </div>

  <!-- General large scrollable modal used for staff actions and for companion view -->
  <div class="overlay hidden" id="modal-view">
    <div class="ig-modal-large" role="dialog" aria-modal="true">
      <button class="ig-close" id="btn-close-view" aria-label="Cerrar">&times;</button>
      <div class="ig-content-large" id="modal-view-content">
        <!-- Contenido dinámico -->
      </div>
    </div>
  </div>

  <!-- Staff Panel -->
  <div class="overlay hidden" id="panel-staff">
    <div class="panel">
      <header class="panel-header">
        <h3 id="panel-title">Panel</h3>
        <div class="panel-actions">
          <button class="btn green" id="btn-view-active">Activos</button>
          <button class="btn red" id="btn-view-egresados">Egresados</button>
          <button class="btn ghost" id="btn-logout">Cerrar sesión</button>
        </div>
      </header>

      <div class="panel-body">
        <aside class="left">
          <div class="search">
            <input id="search-patient" placeholder="Buscar por nombre / internalId / publicCode" />
            <button class="btn" id="btn-search">Buscar</button>
          </div>
          <div class="list" id="patient-list"></div>
        </aside>

        <section class="right" id="patient-detail">
          <div class="muted">Selecciona un paciente para ver detalles</div>
        </section>
      </div>
    </div>
  </div>

  <!-- Companion (uses modal-view) -->
  <div class="overlay hidden" id="panel-companion">
    <div class="modal">
      <h3>Consulta Acompañante</h3>
      <form id="form-companion">
        <input type="text" id="comp-code" placeholder="Código público del paciente" required />
        <div class="row">
          <button class="btn primary" type="submit">Consultar</button>
          <button class="btn ghost" id="btn-close-companion" type="button">Cerrar</button>
        </div>
      </form>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
